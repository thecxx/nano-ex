Fork自https://github.com/lonng/nano,并做了一些适应性修改

